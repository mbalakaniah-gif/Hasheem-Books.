<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hasheem Suppliers</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Arial, sans-serif; background: #f0f2f5; padding: 10px; }

/* Header */
.header { 
    background: linear-gradient(to right, #2c3e50, #34495e); 
    color: white; 
    padding: 15px; 
    text-align: center; 
    border-radius: 10px;
    margin-bottom: 15px;
}
.logo-container { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: 15px; 
    margin-bottom: 10px;
}
.logo { 
    width: 60px; 
    height: 60px; 
    border-radius: 50%; 
    overflow: hidden; 
    background: white; 
    display: flex;
    align-items: center;
    justify-content: center;
}
.company-name { 
    font-size: 1.4rem; 
    font-weight: bold; 
}

/* Form */
.form-group { 
    background: white; 
    padding: 15px; 
    border-radius: 10px; 
    margin-bottom: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.form-row {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}
.form-col {
    flex: 1;
}
label { 
    display: block; 
    margin-bottom: 5px; 
    color: #2c3e50; 
    font-weight: bold;
    font-size: 0.9rem;
}
input, select { 
    width: 100%; 
    padding: 12px; 
    border: 2px solid #ddd; 
    border-radius: 8px; 
    font-size: 16px;
}

/* Table */
.table-container {
    background: white;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 15px;
    overflow-x: auto;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
table { 
    width: 100%; 
    border-collapse: collapse;
    min-width: 500px;
}
th, td { 
    border: 1px solid #ddd; 
    padding: 10px; 
    text-align: center;
    font-size: 14px;
}
th { 
    background: #2c3e50; 
    color: white; 
    font-weight: bold;
}
td input { 
    width: 100%; 
    padding: 8px; 
    border: 1px solid #ddd; 
    border-radius: 4px;
    font-size: 14px;
    text-align: center;
}
.amount-cell {
    font-weight: bold;
    color: #e74c3c;
}

/* Buttons */
.buttons { 
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 10px; 
    margin-bottom: 15px;
}
.button { 
    padding: 15px; 
    border: none; 
    border-radius: 8px; 
    color: white; 
    font-size: 16px; 
    font-weight: bold; 
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.button:active { 
    transform: scale(0.98); 
}
.add-btn { background: #27ae60; }
.pdf-btn { background: #3498db; }

/* Footer */
.footer { 
    background: white; 
    padding: 15px; 
    text-align: center; 
    border-radius: 10px;
    font-style: italic;
    margin-top: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.footer-line {
    margin: 5px 0;
}
</style>
</head>
<body>

<div class="header">
    <div class="logo-container">
        <div class="logo"><img src="1.png" alt="Logo" style="width:100%; height:100%; object-fit:cover;"></div>
        <div>
            <div class="company-name">HASHEEM SUPPLIERS</div>
        </div>
    </div>
</div>

<div class="form-group">
    <div class="form-row">
        <div class="form-col">
            <label>Document Type</label>
            <select id="docType">
                <option>Quotation</option>
                <option>Receipt</option>
            </select>
        </div>
        <div class="form-col">
            <label>Customer Name</label>
            <input type="text" id="customer" placeholder="Customer name">
        </div>
        <div class="form-col">
            <label>Date</label>
            <input type="text" id="docDate" placeholder="e.g. 06/02/2026">
        </div>
    </div>
</div>

<div class="table-container">
    <table id="itemTable">
        <thead>
            <tr>
                <th width="40%">Description</th>
                <th width="15%">Qty</th>
                <th width="20%">Price (MWK)</th>
                <th width="25%">Amount (MWK)</th>
            </tr>
        </thead>
        <tbody id="itemsBody">
        </tbody>
    </table>
</div>

<div class="buttons">
    <button class="button add-btn" onclick="addNewRow()">
        <span style="font-size: 20px;">+</span> Add Item
    </button>
    <button class="button pdf-btn" onclick="generatePDF()">
        <span style="font-size: 20px;">ðŸ“„</span> Create PDF
    </button>
</div>

<div class="footer">
    <div class="footer-line">Powered by Hasheem Suppliers</div>
</div>

<script>
window.onload = function() { addNewRow(); };

// Add row
function addNewRow() {
    const tbody = document.getElementById('itemsBody');
    const newRow = `<tr>
        <td><input type="text" placeholder="Product description"></td>
        <td><input type="number" value="1" min="1"></td>
        <td><input type="number" value="0" min="0" step="0.01"></td>
        <td class="amount-cell">0.00</td>
    </tr>`;
    tbody.innerHTML += newRow;
}

// PDF generation
function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const docType = document.getElementById("docType").value;
    const customer = document.getElementById("customer").value || "N/A";
    const docDate = document.getElementById("docDate").value || "__________";
    const docNo = "HS-" + Math.floor(100000 + Math.random() * 900000);

    // HEADER
    doc.setFont("helvetica","bold");
    doc.setFontSize(20);
    doc.text("HASHEEM SUPPLIERS", 105, 15, { align: "center" });
    doc.setFont("helvetica","normal");
    doc.setFontSize(11);
    doc.text("Phone: 0999 954 649", 105, 22, { align: "center" });
    doc.text("Email: hasheemsuppliers@gmail.com", 105, 28, { align: "center" });

    doc.setFont("helvetica","bold");
    doc.setFontSize(12);
    doc.text(docType.toUpperCase(), 105, 38, { align: "center" });
    doc.setFont("helvetica","normal");
    doc.text(`No: ${docNo}    Date: ${docDate}`, 14, 48);
    doc.text(`Name: ${customer}`, 14, 55);

    // TABLE
    let body = [];
    let total = 0;
    document.querySelectorAll("#itemTable tbody tr").forEach(row => {
        const item = row.children[0].children[0].value;
        const qty = Number(row.children[1].children[0].value);
        const price = Number(row.children[2].children[0].value);
        const amount = qty * price;
        total += amount;
        body.push([item, qty, `MWK ${price.toFixed(2)}`, `MWK ${amount.toFixed(2)}`]);
    });

    body.push([
        { content: "TOTAL", colSpan: 3, styles: { halign: "right", fontStyle: "bold" } },
        { content: `MWK ${total.toFixed(2)}`, styles: { fontStyle: "bold" } }
    ]);

    doc.autoTable({
        startY: 65,
        head: [["Description", "Qty", "Price (MWK)", "Amount (MWK)"]],
        body: body,
        theme: "grid",
        headStyles: { fillColor: [44,62,80] }
    });

    // FOOTER
    const pageHeight = doc.internal.pageSize.height;
    doc.setFontSize(10);
    doc.setFont("helvetica","italic");
    if(docType === "Receipt"){
        doc.text("Thank you for doing business with us", 105, pageHeight - 18, { align: "center" });
    } else {
        doc.text("This quotation is valid for 30 days", 105, pageHeight - 18, { align: "center" });
        doc.text("Thank you for considering Hasheem Suppliers", 105, pageHeight - 12, { align: "center" });
    }
    doc.text("Powered by Hasheem Suppliers", 105, pageHeight - 6, { align: "center" });

    doc.save(`${docType}_${docNo}.pdf`);
}
</script>
</body>
</html>
